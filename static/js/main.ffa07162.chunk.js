(this["webpackJsonpzip-code-search"]=this["webpackJsonpzip-code-search"]||[]).push([[0],{32:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(5),s=n.n(o),a=n(3),i=n(12),d=n.n(i),u=n(17),l=n(18),h=n(19),p=n(6),j=n(23),b=n(22),f=(n(32),n(13)),O=n.n(f),C="HANDLE_ZIP_CODE_INPUT",v="ZIP_CODE_REQUEST",m="ZIP_CODE_RECEIVE",x="ZIP_CODE_FAILURE",g=function(){return{type:v}},y=function(e){var t=e.sourse,n=e.code,r=e.address,c=e.district,o=e.city,s=e.state,a=e.status;return{type:m,sourse:t,code:n,address:r,district:c,city:o,state:s,status:a}},z=function(e){return function(t){return t(g()),function(e){return fetch("https://viacep.com.br/ws/".concat(e,"/json/")).then((function(e){return e.json()})).then((function(e){var t=e.cep,n=e.logradouro,r=e.bairro,c=e.localidade,o=e.uf;return e.erro?{sourse:"https://viacep.com.br",status:"Not-found"}:{sourse:"https://viacep.com.br",code:t,address:n,district:r,city:c,state:o,status:"OK"}}))}(e).then((function(e){return t(y(e))})).catch((function(){return t(g()),function(e){return fetch("https://ws.apicep.com/busca-cep/api/cep/".concat(e,".json")).then((function(e){return e.json()})).then((function(e){var t=e.code,n=e.address,r=e.district,c=e.city,o=e.state;return e.ok?{sourse:"https://apicep.com/api-de-consulta/",code:t,address:n,district:r,city:c,state:o,status:"OK"}:{sourse:"https://apicep.com/api-de-consulta/",status:"Not-found"}}))}(e).then((function(e){return t(y(e))})).catch((function(){return t(g()),function(e){return fetch("https://api.findcep.com/v1/cep/".concat(e,".json")).then((function(e){return e.json()})).then((function(e){var t=e.cep,n=e.logradouro,r=e.bairro,c=e.cidade,o=e.uf;return 404===e.status_code?{sourse:"https://www.findcep.com/",status:"Not-found"}:{sourse:"https://www.findcep.com/",code:t,address:n,district:r,city:c,state:o,status:"OK"}}))}(e).then((function(e){return t(y(e))})).catch((function(){return t({type:x})}))}))}))}},M=n(1),E=Object(a.b)((function(e){return{ZipCodeData:e.zipCodeDataReducer}}))((function(e){var t=e.ZipCodeData,n=e.handleCloseModal;return Object(M.jsxs)("div",{children:[Object(M.jsx)("h3",{children:"CEP n\xe3o encontrado. Verifique se digitou corretamente e tente outra vez."}),Object(M.jsxs)("div",{className:"zip-code-footer",children:[Object(M.jsx)("a",{href:t.sourse,target:"_blank",rel:"noreferrer",children:"Fonte"}),Object(M.jsx)("button",{type:"button",onClick:n,children:"Sair"})]})]})})),w=Object(a.b)((function(e){return{ZipCodeData:e.zipCodeDataReducer}}))((function(e){var t=e.ZipCodeData,n=e.handleCloseModal;return"Not-found"===t.status?Object(M.jsx)(E,{handleCloseModal:n}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("h1",{className:"zip-code-title",children:["CEP: ",t.code]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("strong",{children:"Rua:"})," ",t.address]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("strong",{children:"Bairro:"})," ",t.district]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("strong",{children:"Cidade/UF:"})," ","".concat(t.city,"/").concat(t.state)]}),Object(M.jsxs)("div",{className:"zip-code-footer",children:[Object(M.jsx)("a",{href:t.sourse,target:"_blank",rel:"noreferrer",children:"Fonte"}),Object(M.jsx)("button",{type:"button",onClick:n,children:"Sair"})]})]})})),D=function(e){var t=e.handleCloseModal;return Object(M.jsxs)("div",{children:[Object(M.jsx)("h3",{children:"Servidores fora do ar! Infelizmente n\xe3o conseguimos encontrar a informa\xe7\xe3o do seu CEP. Por favor tente novamente, mais tarde."}),Object(M.jsx)("div",{className:"zip-code-footer",children:Object(M.jsx)("button",{type:"button",onClick:t,children:"Sair"})})]})};O.a.setAppElement("#root");var k=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={showModal:!1},e.handleOpenModal=e.handleOpenModal.bind(Object(p.a)(e)),e.handleCloseModal=e.handleCloseModal.bind(Object(p.a)(e)),e}return Object(h.a)(n,[{key:"handleOpenModal",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.requestZipCodeData,r=t.zipCode,e.next=3,n(r);case 3:this.setState({showModal:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCloseModal",value:function(){this.setState({showModal:!1})}},{key:"render",value:function(){var e=this,t=this.state.showModal,n=this.props,r=n.handleInput,c=n.zipCodeMask,o=n.ZipCodeData;return Object(M.jsxs)("main",{children:[Object(M.jsx)("img",{src:"/logo.jpg",alt:"Logo Site"}),Object(M.jsx)("h1",{children:"Encontre seu CEP"}),Object(M.jsxs)("form",{className:"zipCode-form",children:[Object(M.jsx)("label",{htmlFor:"zipCode-input",children:Object(M.jsx)("input",{id:"zipCode-input",name:"zipCode-input",onChange:r,placeholder:"Digite seu CEP",maxLength:"9",type:"text",value:c})}),Object(M.jsx)("button",{type:"button",onClick:function(){return e.handleOpenModal()},children:"Pesquisar"}),Object(M.jsx)(O.a,{isOpen:t,className:"modal-box",onRequestClose:this.handleCloseModal,contentLabel:"Example Modal",children:Object(M.jsx)("div",{className:"modal-box-info",children:o.failure?Object(M.jsx)(D,{handleCloseModal:this.handleCloseModal}):Object(M.jsx)(w,{handleCloseModal:this.handleCloseModal})})})]})]})}}]),n}(c.a.Component),N=Object(a.b)((function(e){return{zipCodeMask:e.formReducer.zipCode,zipCode:e.formReducer.zipCode.replace("-",""),ZipCodeData:e.zipCodeDataReducer}}),(function(e){return{handleInput:function(t){var n=t.target;return e(function(e){var t=e.value;return{type:C,zipCode:t.replace(/^(\d{5})(\d)/,"$1-$2")}}(n))},requestZipCodeData:function(t){return e(z(t))}}}))(k);var R=function(){return Object(M.jsx)("div",{className:"App",children:Object(M.jsx)(N,{})})},P=n(4),Z=n(20),_=n(21),I=n(2),F={zipCode:""},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(I.a)(Object(I.a)({},e),{},{zipCode:t.zipCode});default:return e}},q={sourse:"",code:"",address:"",district:"",city:"",state:"",status:"not-request",isFetching:!1,failure:!1},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(I.a)(Object(I.a)({},e),{},{isFetching:!0});case m:return Object(I.a)(Object(I.a)({},e),{},{sourse:t.sourse,code:t.code,address:t.address,district:t.district,city:t.city,state:t.state,status:t.status,isFetching:!1});case x:return Object(I.a)(Object(I.a)({},e),{},{isFetching:!1,failure:!0});default:return e}},A=Object(P.combineReducers)({formReducer:S,zipCodeDataReducer:L}),U=Object(P.createStore)(A,Object(Z.composeWithDevTools)(Object(P.applyMiddleware)(_.a)));s.a.render(Object(M.jsx)(a.a,{store:U,children:Object(M.jsx)(R,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.ffa07162.chunk.js.map